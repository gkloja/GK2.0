<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loja GK - MaquiaGem e Kosmeticos</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/nazuninha/uploads/main/fotos/1763313349933_rjvhcz.jpg" />
  
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Playfair+Display:wght=400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

 <style>
  /* ====================== DESIGN SYSTEM ATUALIZADO ====================== */
  :root {
    /* Cores principais refinadas */
    --cor-primaria: #1c1c1c;
    --cor-secundaria: #f8f5f0; /* Bege mais claro e elegante */
    --cor-acento: #b89f5a; /* Dourado mais rico e sofisticado */
    --cor-acento-claro: #d4c29a;
    --cor-fundo: #ffffff;
    --cor-texto: #2d2d2d;
    --cor-texto-claro: #ffffff;
    --cor-sucesso: #27ae60; /* Verde mais elegante */
    --cor-erro: #c0392b; /* Vermelho mais suave */
    --cor-alerta: #e67e22;
    --cor-borda-clara: #e8e8e8;
    --cor-hover-lista: #f9f9f9;
    
    /* Sistema de sombras refinado */
    --sombra-leve: 0 2px 8px rgba(0, 0, 0, 0.06);
    --sombra-media: 0 4px 16px rgba(0, 0, 0, 0.1);
    --sombra-intensa: 0 8px 30px rgba(0, 0, 0, 0.15);
    --sombra-destaque: 0 0 0 4px rgba(184, 159, 90, 0.2);
    
    /* Transi√ß√µes e anima√ß√µes */
    --transicao: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    --transicao-rapida: all 0.15s ease-out;
    --transicao-lenta: all 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
    
    /* Bordas e espa√ßamentos */
    --borda-raio: 12px;
    --borda-raio-pequeno: 6px;
    --espacamento-xs: 8px;
    --espacamento-sm: 16px;
    --espacamento-md: 24px;
    --espacamento-lg: 32px;
    --espacamento-xl: 48px;
  }

  /* ====================== BASE REFINADA ====================== */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', 'Roboto', sans-serif;
    background-color: var(--cor-secundaria);
    color: var(--cor-texto);
    line-height: 1.6;
    padding-top: 80px;
    overflow-x: hidden;
  }

  /* ====================== TIPOGRAFIA REFINADA ====================== */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 0.5em;
  }

  h1 {
    font-size: 2.5rem;
    letter-spacing: -0.5px;
  }

  h2 {
    font-size: 2rem;
    letter-spacing: -0.3px;
  }

  h3 {
    font-size: 1.5rem;
    letter-spacing: -0.2px;
  }

  p {
    margin-bottom: 1em;
  }

  /* ====================== HEADER ELEGANTE ATUALIZADO ====================== */
  .header-elegante {
    background: linear-gradient(135deg, var(--cor-primaria) 0%, #2a2a2a 100%);
    color: var(--cor-texto-claro);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 15px 20px;
    box-shadow: var(--sombra-intensa);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .logo-min {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-right: 15px;
    border: 2px solid var(--cor-acento);
    object-fit: cover;
    transition: var(--transicao);
  }

  .logo-min:hover {
    transform: rotate(10deg) scale(1.05);
    box-shadow: 0 0 15px rgba(184, 159, 90, 0.5);
  }

  .header-texto h1 {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    font-weight: 900;
    letter-spacing: 2px;
    color: var(--cor-acento);
    margin: 0;
    position: relative;
    display: inline-block;
  }

  .header-texto h1::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--cor-acento), transparent);
    transform: scaleX(0);
    transition: transform 0.5s ease;
  }

  .header-texto:hover h1::after {
    transform: scaleX(1);
  }

  .header-texto p {
    font-size: 0.8rem;
    font-weight: 300;
    opacity: 0.8;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 1.5px;
  }
  /* ============================
   GRID PREMIUM
============================ */
.grid-premium {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
  gap: 22px;
  padding: 20px;
}


/* ============================
   CARD PREMIUM BASE
============================ */
.card-premium {
  background: #ffffff;
  border-radius: 18px;
  padding: 16px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 26px rgba(0,0,0,0.08);
  transition: all 0.25s ease;
  border: 1px solid transparent;
}

.card-premium:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 32px rgba(0,0,0,0.15);
  border-color: #f1c27d;
}


/* ============================
   SELO DIN√ÇMICO
============================ */
.tag-dinamica {
  position: absolute;
  top: 12px;
  left: 12px;
  background: linear-gradient(45deg, #ffb800, #ff7600);
  padding: 6px 12px;
  font-size: 0.75rem;
  font-weight: bold;
  color: #fff;
  border-radius: 10px;
  z-index: 5;
  animation: pulseTag 1.5s infinite;
}

@keyframes pulseTag {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.12); opacity: .85; }
  100% { transform: scale(1); opacity: 1; }
}


/* ============================
   IMAGENS PREMIUM
============================ */
.premium-img {
  width: 100%;
  height: 260px;
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 12px;
  background: #eee;
}

.premium-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform .35s ease;
}

.card-premium:hover .premium-img img {
  transform: scale(1.08);
}


/* ============================
   T√çTULOS & TEXTOS
============================ */
.titulo-produto {
  font-size: 1rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 8px;
  min-height: 42px;
}

.preco-produto {
  font-size: 1.2rem;
  color: #111;
  margin-bottom: 10px;
}

.preco-produto span {
  font-size: 0.9rem;
  opacity: 0.7;
}

.preco-produto strong {
  font-size: 1.4rem;
  font-weight: 800;
  color: #e49522;
}


/* ============================
   AVALIA√á√ÉO
============================ */
.avaliacao-luxo {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  color: #666;
  font-size: 0.85rem;
}

.avaliacao-luxo .stars i {
  color: #f4c300;
  margin-right: 1px;
}


/* ============================
   ESTOQUE
============================ */
.estoque-premium {
  font-size: 0.85rem;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
  color: #333;
}

.estoque-premium .zero {
  color: #cc0000;
  font-weight: bold;
}


/* ============================
   BARRA DE POPULARIDADE
============================ */
.popularidade-bar {
  width: 100%;
  height: 6px;
  background: #eaeaea;
  border-radius: 10px;
  overflow: hidden;
  margin: 6px 0 4px;
}

.popularidade-bar .bar {
  height: 100%;
  background: linear-gradient(90deg, #ffb300, #ff7300);
  border-radius: 10px;
  transition: width .5s ease;
}

.popularidade-texto {
  font-size: 0.78rem;
  color: #555;
  margin-bottom: 16px;
}


/* ============================
   A√á√ïES (BOT√ïES)
============================ */
.acoes-premium {
  display: flex;
  align-items: center;
  gap: 10px;
}

.acoes-premium input {
  width: 60px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid #ccc;
  padding-left: 10px;
  font-size: 0.9rem;
}

.btn-add-premium {
  flex: 1;
  background: linear-gradient(45deg, #ff9d00, #ff6c00);
  color: white;
  border: none;
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: bold;
  cursor: pointer;
  font-size: 0.95rem;
  box-shadow: 0 4px 14px rgba(255, 110, 0, .35);
  transition: all .2s ease;
}

.btn-add-premium:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
}


/* ============================
   BOT√ÉO ESGOTADO
============================ */
.btn-esgotado-premium {
  width: 100%;
  background: #333;
  color: #fff;
  padding: 12px;
  border-radius: 12px;
  border: none;
  font-size: 0.9rem;
  cursor: pointer;
  margin-top: 10px;
  transition: background .2s ease;
}

.btn-esgotado-premium:hover {
  background: #000;
}

  /* ====================== BANNER PROMOCIONAL ATUALIZADO ====================== */
  .banner-promocao {
    background: linear-gradient(90deg, var(--cor-acento) 0%, var(--cor-acento-claro) 100%);
    color: var(--cor-texto-claro);
    text-align: center;
    padding: 12px 0;
    font-weight: 600;
    letter-spacing: 1px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    position: relative;
    overflow: hidden;
  }

  .banner-promocao::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: brilho 3s infinite;
  }

  @keyframes brilho {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  /* ====================== LAYOUT PRINCIPAL REFINADO ====================== */
  .container {
    max-width: 1200px;
    margin: 30px auto;
    padding: 0 var(--espacamento-sm);
  }

  /* -------------------------------------------
   DESIGN SYSTEM PREMIUM
------------------------------------------- */
:root {
  --preto: #111;
  --preto-suave: #1c1c1c;
  --cinza-suave: #e9e9e9;
  --cinza-medio: #cccccc;
  --cinza-escuro: #3a3a3a;

  --dourado: #c7a155;
  --dourado-suave: #e7c98f;
  --dourado-brilhante: #f5d389;

  --verde-wpp: #25d366;
  --vermelho: #d9534f;

  --radius: 14px;
  --shadow: 0 6px 18px rgba(0,0,0,0.18);
  --shadow-hover: 0 10px 25px rgba(0,0,0,0.25);
}
 /* ====================== CONTROLES MODERNIZADOS ====================== */
  .controles-produtos {
    display: flex;
    flex-wrap: wrap;
    gap: var(--espacamento-sm);
    margin-bottom: var(--espacamento-lg);
    background: var(--cor-fundo);
    padding: var(--espacamento-md);
    border-radius: var(--borda-raio);
    box-shadow: var(--sombra-leve);
    border: 1px solid var(--cor-borda-clara);
  }

  .pesquisa-container {
    flex-grow: 1;
    display: flex;
    align-items: center;
    border: 1px solid var(--cor-borda-clara);
    border-radius: var(--borda-raio);
    padding: var(--espacamento-xs) var(--espacamento-sm);
    transition: var(--transicao);
    min-width: 200px;
    background: var(--cor-fundo);
    position: relative;
  }

  .pesquisa-container:focus-within {
    border-color: var(--cor-acento);
    box-shadow: var(--sombra-destaque);
  }

  #pesquisa {
    border: none;
    outline: none;
    padding: var(--espacamento-xs);
    font-size: 1rem;
    flex-grow: 1;
    background: transparent;
  }

  .pesquisa-container i {
    color: #999;
    margin-right: var(--espacamento-xs);
  }

  .filtros-container {
    display: flex;
    gap: var(--espacamento-xs);
    flex-wrap: wrap;
  }

  .filtro-btn {
    background-color: var(--cor-fundo);
    color: var(--cor-texto);
    border: 1px solid var(--cor-borda-clara);
    padding: var(--espacamento-xs) var(--espacamento-sm);
    border-radius: var(--borda-raio);
    cursor: pointer;
    font-weight: 500;
    transition: var(--transicao);
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
  }

  .filtro-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(184, 159, 90, 0.1), transparent);
    transition: left 0.5s;
  }

  .filtro-btn:hover::before {
    left: 100%;
  }

  .filtro-btn.ativo, .filtro-btn:hover {
    background-color: var(--cor-acento);
    color: var(--cor-texto-claro);
    border-color: var(--cor-acento);
    transform: translateY(-2px);
    box-shadow: var(--sombra-media);
  }

  .filtro-btn i {
    margin-right: 5px;
  }

  /* ====================== PRODUTOS GRID ATUALIZADO ====================== */
  .produtos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--espacamento-lg);
  }

  .produto {
    background: var(--cor-fundo);
    border-radius: var(--borda-raio);
    overflow: hidden;
    box-shadow: var(--sombra-leve);
    padding: var(--espacamento-md);
    display: flex;
    flex-direction: column;
    transition: var(--transicao);
    position: relative;
    text-align: center;
    border: 1px solid var(--cor-borda-clara);
  }

  .produto:hover {
    transform: translateY(-8px);
    box-shadow: var(--sombra-intensa);
    border-color: var(--cor-acento-claro);
  }

  .produto-img-container {
    height: 250px;
    width: 100%;
    margin-bottom: var(--espacamento-sm);
    overflow: hidden;
    border-radius: var(--borda-raio-pequeno);
    position: relative;
  }

  .produto-img-container::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40%;
    background: linear-gradient(transparent, rgba(0,0,0,0.1));
    pointer-events: none;
  }

  .produto-img-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.7s ease;
  }

  .produto:hover img {
    transform: scale(1.08);
  }

  .produto h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 5px;
    color: var(--cor-primaria);
  }

  .preco {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--cor-acento);
    margin: 10px 0;
    position: relative;
    display: inline-block;
  }

  .preco::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--cor-acento);
    transition: width 0.3s ease;
  }

  .produto:hover .preco::after {
    width: 100%;
  }

  .estoque {
    font-size: 0.9rem;
    color: #777;
    margin-bottom: var(--espacamento-sm);
  }

  .avaliacao {
    color: gold;
    font-size: 0.9rem;
    margin-bottom: var(--espacamento-sm);
    display: flex;
    justify-content: center;
    gap: 2px;
  }

  .avaliacao span {
    color: var(--cor-texto);
    margin-left: 5px;
  }

  .controles-produto {
    margin-top: auto;
    display: flex;
    gap: var(--espacamento-xs);
    width: 100%;
  }

  .controles-produto input {
    width: 60px;
    text-align: center;
    border: 1px solid var(--cor-borda-clara);
    border-radius: var(--borda-raio-pequeno);
    padding: var(--espacamento-xs) 5px;
    transition: var(--transicao);
  }

  .controles-produto input:focus {
    border-color: var(--cor-acento);
    box-shadow: 0 0 0 2px rgba(184, 159, 90, 0.2);
  }

  .controles-produto button {
    flex-grow: 1;
    background-color: var(--cor-primaria);
    color: var(--cor-texto-claro);
    border: none;
    padding: var(--espacamento-xs) var(--espacamento-sm);
    border-radius: var(--borda-raio-pequeno);
    cursor: pointer;
    font-weight: 500;
    transition: var(--transicao);
    position: relative;
    overflow: hidden;
  }

  .controles-produto button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.5);
    opacity: 0;
    border-radius: 100%;
    transform: scale(1, 1) translate(-50%);
    transform-origin: 50% 50%;
  }

  .controles-produto button:focus:not(:active)::after {
    animation: ripple 1s ease-out;
  }

  @keyframes ripple {
    0% {
      transform: scale(0, 0);
      opacity: 0.5;
    }
    100% {
      transform: scale(20, 20);
      opacity: 0;
    }
  }

  .controles-produto button:hover {
    background-color: #333;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  /* ====================== SELOS E BADGES ATUALIZADOS ====================== */
  .selo {
    position: absolute;
    top: 0;
    right: 0;
    background: var(--cor-erro);
    color: var(--cor-texto-claro);
    padding: 5px 10px;
    font-weight: 700;
    border-bottom-left-radius: var(--borda-raio);
    z-index: 10;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 10% 50%);
  }

  .selo.esgotado {
    background: var(--cor-alerta);
  }

  /* ====================== PODIUM TOP 3 INVERTIDO ATUALIZADO ====================== */
  .podium-top3-invertido {
    display: contents;
  }

  .produto-top3 {
    border: 2px solid var(--cor-acento);
    box-shadow: 0 0 20px rgba(184, 159, 90, 0.4);
    order: -1;
    transform: scale(1.03);
    position: relative;
  }

  .produto-top3::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--cor-acento), transparent, var(--cor-acento));
    border-radius: var(--borda-raio);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.5s;
  }

  .produto-top3:hover::before {
    opacity: 1;
  }

  .badge-top3-premium {
    position: absolute;
    top: 0;
    left: 0;
    background: var(--cor-acento);
    color: var(--cor-primaria);
    padding: 5px 10px;
    font-weight: 700;
    border-bottom-right-radius: var(--borda-raio);
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  .badge-top3-premium .medalha {
    font-size: 1.1rem;
    color: var(--cor-primaria);
  }

  .badge-top3-premium small {
    font-size: 0.75rem;
    font-weight: 400;
    color: var(--cor-primaria);
  }

 /* ====================== CARRINHO FLUTUANTE PREMIUM ====================== */
.carrinho {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 9999;
  background: linear-gradient(135deg, var(--cor-acento), #c6ae7a);
  color: var(--cor-primaria);
  padding: 16px 28px;
  border-radius: 50px;
  box-shadow:
    0 12px 30px rgba(0, 0, 0, 0.35),
    0 0 0 4px rgba(255, 255, 255, 0.4),
    inset 0 0 12px rgba(255, 255, 255, 0.15);
  cursor: pointer;
  font-weight: 800;
  letter-spacing: 0.7px;
  display: flex;
  align-items: center;
  gap: 12px;
  transition: 0.3s ease;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  animation: carrinhoEntrada 0.9s ease-out;
}

@keyframes carrinhoEntrada {
  0% { transform: translateY(50px) scale(0.9); opacity: 0; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}

.carrinho:hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow:
    0 18px 40px rgba(0, 0, 0, 0.5),
    0 0 0 6px rgba(255, 255, 255, 0.55),
    inset 0 0 20px rgba(255, 255, 255, 0.22);
}

.carrinho:active {
  transform: scale(0.96);
}

.carrinho i {
  animation: glowIcon 2.5s infinite ease-in-out;
}

@keyframes glowIcon {
  0%, 100% { filter: drop-shadow(0 0 0px var(--cor-acento)); }
  50% { filter: drop-shadow(0 0 5px var(--cor-acento)); }
}

/* ====================== CONTADOR DO CARRINHO ====================== */
.carrinho-count {
  background: var(--cor-erro);
  color: var(--cor-texto-claro);
  border-radius: 50%;
  padding: 4px 9px;
  font-size: 0.85rem;
  font-weight: 700;
  min-width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
  transition: 0.25s ease;
}

.carrinho-count.animar-adicao {
  transform: scale(1.35);
  background: var(--cor-sucesso);
}

/* ====================== PAINEL DE FINALIZA√á√ÉO LUXURY ====================== */
.finalizar {
  position: fixed;
  top: 0;
  right: 0;
  width: 420px;
  max-width: 95%;
  height: 100%;
  background: linear-gradient(to bottom right, #ffffff, #f6f3ed);
  box-shadow: -12px 0 45px rgba(0, 0, 0, 0.25);
  padding: 35px;
  transform: translateX(100%);
  transition: transform 0.7s cubic-bezier(0.77, 0, 0.175, 1);
  z-index: 99999;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  border-left: 2px solid rgba(0, 0, 0, 0.05);
}

.overlay-finalizar {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(5px);
  z-index: 99998;
  opacity: 0;
  pointer-events: none;
  transition: 0.4s ease-out;
}

.finalizar[aria-hidden="false"] {
  transform: translateX(0);
}

.finalizar[aria-hidden="false"] ~ .overlay-finalizar {
  opacity: 1;
  pointer-events: auto;
}

/* ====================== BOT√ÉO DE FECHAR ====================== */
.fechar-carrinho {
  position: absolute;
  top: 25px;
  right: 25px;
  background: var(--cor-fundo);
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  font-size: 1.4rem;
  color: var(--cor-erro);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 4px 12px rgba(0,0,0,0.15),
    inset 1px 1px 5px rgba(255,255,255,0.4);
  transition: 0.35s ease;
}

.fechar-carrinho:hover {
  transform: rotate(90deg) scale(1.18);
}

/* ====================== LISTA DO CARRINHO ====================== */
.finalizar h2 {
  font-family: 'Playfair Display', serif;
  color: var(--cor-primaria);
  font-size: 2.3rem;
  margin-bottom: 25px;
  border-bottom: 3px solid var(--cor-acento);
  padding-bottom: 15px;
}

#listaCarrinho {
  list-style: none;
  padding: 0;
  margin-bottom: 30px;
  flex-grow: 1;
}

.item-carrinho {
  display: grid;
  grid-template-areas: 
    "title actions"
    "meta actions"
    "sub actions";
  grid-template-columns: 1fr max-content;
  gap: 2px 15px;
  padding: 14px 0;
  border-bottom: 1px solid var(--cor-borda-clara);
  transition: 0.25s ease;
}

.item-carrinho:hover {
  background-color: var(--cor-hover-lista);
  padding-left: 7px;
}

.item-carrinho.desejo {
  background: #fff7dd;
  border-left: 6px solid var(--cor-acento);
  border-radius: 6px;
  padding: 14px;
  margin: 12px 0;
  box-shadow: 0 3px 8px rgba(0,0,0,0.05);
}

/* textos */
.item-title { grid-area: title; font-weight: 800; }
.item-meta { grid-area: meta; font-size: 0.92rem; color: #888; }
.item-sub  { grid-area: sub; font-style: italic; margin-top: 6px; }

/* a√ß√µes */
.item-actions { grid-area: actions; align-self: center; display: flex; gap: 10px; }

.item-actions button {
  background: none;
  border: none;
  font-size: 1.25rem;
  cursor: pointer;
  color: var(--cor-primaria);
  opacity: 0.55;
  transition: 0.2s ease;
}

.item-actions button:hover {
  opacity: 1;
  color: var(--cor-erro);
  transform: scale(1.2);
}

/* ====================== TOTAL ====================== */
.total {
  font-size: 1.9rem;
  font-weight: 900;
  color: var(--cor-acento);
  margin-top: 30px;
  padding-top: 18px;
  border-top: 3px dashed var(--cor-borda-clara);
  text-align: right;
  letter-spacing: 1.3px;
}



/* ====================== BOT√ÉO WHATSAPP PREMIUM ====================== */
#enviarWhats {
  width: 100%;
  background: linear-gradient(135deg, #25D366, #1ebe5e);
  color: white;
  padding: 20px;
  border: none;
  border-radius: 12px;
  font-size: 1.25rem;
  font-weight: 800;
  cursor: pointer;
  transition: 0.35s ease;
  margin-top: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 6px 15px rgba(37, 211, 102, 0.4),
    0 0 12px rgba(37, 211, 102, 0.35);
}

#enviarWhats i {
  margin-right: 12px;
  font-size: 1.55rem;
}

#enviarWhats:hover {
  transform: translateY(-3px);
  box-shadow:
    0 10px 22px rgba(37, 211, 102, 0.55),
    0 0 15px rgba(37, 211, 102, 0.6);
}

#enviarWhats:hover i {
  transform: rotate(8deg) scale(1.07);
}

#enviarWhats:disabled {
  background: #b2e5c4;
  opacity: 0.7;
  cursor: not-allowed;
  box-shadow: none;
}
  /* ====================== NOTIFICA√á√ÉO ATUALIZADA ====================== */
  .notificacao {
    position: fixed;
    top: 90px;
    left: 50%;
    transform: translateX(-50%) translateY(-150%);
    background: var(--cor-sucesso);
    color: var(--cor-texto-claro);
    padding: 18px 30px;
    border-radius: 8px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    font-weight: 600;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 7000;
    display: flex;
    align-items: center;
    min-width: 250px;
    text-align: center;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .notificacao.mostrar {
    transform: translateX(-50%) translateY(0);
  }

  .notificacao.erro {
    background: var(--cor-erro);
  }

  .notificacao.aviso {
    background: var(--cor-alerta);
  }

  .notificacao i {
    margin-right: 15px;
    font-size: 1.3rem;
  }

  /* ====================== LOGO FLUTUANTE ATUALIZADA ====================== */
  .logo-flutuante {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    opacity: 0.1;
    z-index: 1000;
    pointer-events: none;
    animation: subtle-pulse 10s infinite ease-in-out;
  }

  @keyframes subtle-pulse {
    0%, 100% { opacity: 0.1; transform: scale(1); }
    50% { opacity: 0.15; transform: scale(1.02); }
  }

  /* ====================== RODAP√â ATUALIZADO ====================== */
  footer {
    background: linear-gradient(135deg, var(--cor-primaria) 0%, #2a2a2a 100%);
    color: #bbb;
    padding: 30px 20px;
    text-align: center;
    margin-top: 50px;
    position: relative;
    overflow: hidden;
  }

  footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--cor-acento), transparent);
  }

  .footer-content p {
    margin: 5px 0;
    font-size: 0.9rem;
  }

  .social-links {
    margin: 15px 0;
  }

  .social-links a {
    color: var(--cor-acento);
    font-size: 1.5rem;
    margin: 0 10px;
    transition: var(--transicao);
    display: inline-block;
  }

  .social-links a:hover {
    color: var(--cor-texto-claro);
    transform: translateY(-3px);
  }

  /* ====================== RESPONSIVIDADE REFINADA ====================== */
  @media (max-width: 900px) {
    .finalizar {
      width: 300px;
    }
    
    .produtos {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
  }

  @media (max-width: 768px) {
    .header-elegante {
      padding: 12px 15px;
    }
    
    .header-texto h1 {
      font-size: 1.5rem;
    }
    
    .controles-produtos {
      flex-direction: column;
    }
    
    .pesquisa-container {
      width: 100%;
    }
  }

  @media (max-width: 500px) {
    .finalizar {
      width: 100%;
      max-width: 100%;
      padding: 20px;
    }
    
    .carrinho {
      bottom: 15px;
      right: 15px;
      padding: 10px 18px;
    }
    
    .carrinho span:not(.carrinho-count) {
      display: none;
    }
    
    .carrinho i {
      margin: 0;
    }
    
    .produtos {
      grid-template-columns: 1fr;
    }
  }
</style>

</head>
<body>

<header class="header-elegante">
  <img 
    src="https://raw.githubusercontent.com/nazuninha/uploads/main/fotos/1763313349933_rjvhcz.jpg"
    alt="GK Premium Logo"
    class="logo-min"
  >

  <div class="header-texto">
    <h1>GK Premium</h1>
    <p>Maquiagem ‚Ä¢ Cosm√©ticos ‚Ä¢ Eleg√¢ncia</p>
  </div>
</header>

<div class="banner-promocao">
  <span>Produtos para todo o Manaus!</span>
</div>

<div class="container">

  <!-- üîç √ÅREA DE CONTROLES -->
  <div class="controles-produtos">

    <!-- Barra de pesquisa -->
    <div class="pesquisa-container">
      <i class="fas fa-search"></i>
      <input type="text" id="pesquisa" placeholder="Buscar produtos...">
    </div>

    <!-- Filtros aprimorados -->
    <div class="filtros-container">
      <button class="filtro-btn ativo" data-filtro="todos">
        <i class="fas fa-th-large"></i> Todos
      </button>

      <button class="filtro-btn" data-filtro="acessorio">
        <i class="fas fa-gem"></i> Acess√≥rios
      </button>

      <button class="filtro-btn" data-filtro="roupas-femininas">
        <i class="fas fa-female"></i> Femininas
      </button>

      <button class="filtro-btn" data-filtro="roupas-masculinas">
        <i class="fas fa-male"></i> Masculinas
      </button>

      <button class="filtro-btn" data-filtro="novos">
        <i class="fas fa-star"></i> Novidades
      </button>

      <button class="filtro-btn" data-filtro="disponivel">
        <i class="fas fa-check-circle"></i> Dispon√≠vel
      </button>

      <button class="filtro-btn" data-filtro="esgotado">
        <i class="fas fa-times-circle"></i> Esgotado
      </button>
    </div>
  </div>


  <!-- üî• GRID PREMIUM DE PRODUTOS -->
  <div class="produtos grid-premium" id="produtos">

    <% 
      function safeParseFloatEJS(v){ 
        const val = String(v).replace(',', '.');
        const num = parseFloat(val); 
        return isNaN(num) ? 0 : num;
      }

      const produtosComId = produtos.map(prod => ({
        ...prod,
        id: prod.Item,
        estoque: prod["ESTOQUE "] || prod.ESTOQUE,
        vendido: prod["Vendido (QNTD)"] || 0,
        valorVenda: prod["Valor Venda (R$)"],
        descricao: prod.Descri√ß√£o
      }));

      function getTagEspecial(prod) {
        if (prod.estoque === 0) return "üö´ Indispon√≠vel";
        if (prod.vendido >= 10) return "üî• Alta procura";
        if (prod.vendido > 0) return "‚≠ê Saindo bastante";
        return "‚ú® Novo";
      }
    %>

    <% produtosComId.forEach(prod => { %>

      <div class="produto card-premium"
        data-id="<%= prod.id %>"
        data-nome="<%= prod.descricao.toLowerCase() %>"
        data-estoque="<%= prod.estoque %>"
        data-vendido="<%= prod.vendido %>"
      >

        <!-- ‚≠ê TAG ESPECIAL MELHORADA -->
        <div class="tag-dinamica pulse-premium">
          <%= getTagEspecial(prod) %>
        </div>

        <!-- üì∏ IMAGEM -->
        <div class="produto-img-container premium-img">
          <img src="<%= prod.Imagem || 'https://raw.githubusercontent.com/nazuninha/uploads/main/fotos/1763313349933_rjvhcz.jpg' %>"
               alt="<%= prod.descricao %>">
        </div>

        <!-- üè∑Ô∏è NOME -->
        <h3 class="titulo-produto"><%= prod.descricao %></h3>

        <!-- üíµ PRE√áO -->
        <p class="preco-produto">
          <span>R$</span>
          <strong><%= safeParseFloatEJS(prod.valorVenda).toFixed(2) %></strong>
        </p>

        <!-- ‚≠ê AVALIA√á√ÉO -->
        <div class="avaliacao-luxo">
          <div class="stars">
            <i class="fas fa-star"></i><i class="fas fa-star"></i>
            <i class="fas fa-star"></i><i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
          </div>
          <span>Favorito dos clientes</span>
        </div>

        <!-- üì¶ ESTOQUE -->
        <p class="estoque-premium">
          <i class="fas fa-box"></i>
          <%= prod.estoque > 0 ? prod.estoque + ' unidades' : 'Sem estoque' %>
        </p>

        <!-- üìä POPULARIDADE -->
        <%
          const totalEstimado = prod.vendido + prod.estoque;
          const popularidade = totalEstimado > 0 ? Math.round((prod.vendido / totalEstimado) * 100) : 0;
        %>

        <div class="popularidade-bar melhorada">
          <div class="bar" style="width: <%= popularidade %>%"></div>
        </div>

        <p class="popularidade-texto"><%= popularidade %>% dos clientes escolheram</p>

        <!-- üõí A√á√ïES -->
        <% if (prod.estoque > 0) { %>
          <div class="acoes-premium">

            <input type="number" min="1" max="<%= prod.estoque %>" value="1" id="qtd-<%= prod.id %>">

            <button class="btn-add-premium" onclick="adicionarCarrinho('<%= prod.id %>')">
              <i class="fas fa-shopping-bag"></i> Comprar
            </button>

          </div>
        <% } else { %>

          <button class="btn-esgotado-premium" onclick="desejoComprar('<%= prod.descricao %>')">
            <i class="fas fa-bell"></i> Avise-me
          </button>

        <% } %>

      </div>

    <% }) %>

  </div>
</div>

<footer>
  <div class="footer-content">
    <p>GK Premium - Sua loja de moda e estilo</p>
    <div class="social-links">
      <a href="https://www.instagram.com/gk.cosmetics_?igsh=a3M0amVpeHZzcjRv" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://facebook.com" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
      <a href="https://wa.me/559285341621" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    </div>
    <p>Entre em contato: **+55 92 8534-1621**</p>
    <p>&copy; 2025 maquiaGem e Kosmeticos. Todos os direitos reservados.</p>
  </div>
</footer>

<style>
:root {
    --bg: #f0f0f3;
    --card: #f9f9fc;
    --accent: #ac8a4c;
    --accent-dark: #8a6c3c;
    --shadow: 8px 8px 16px #c6c6c9, -8px -8px 16px #ffffff;
    --inner-shadow: inset 4px 4px 8px #e0e0e3, inset -4px -4px 8px #ffffff;
    --text: #333;
    --success: #4CAF50;
    --error: #F44336;
    --smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

body { font-family: 'Poppins', sans-serif; background: var(--bg); margin: 0; }
.hidden { display: none !important; }

/* NEUMORFISMO */
.neumorphism { background: var(--card); box-shadow: var(--shadow); transition: all var(--smooth); }
.neu-active { box-shadow: var(--inner-shadow); }

/* BOT√ÉO FLUTUANTE (Mais alto) */
.floating-btn {
    position: fixed; bottom: 80px; right: 20px; /* Subi 50px */
    width: 60px; height: 60px; font-size: 24px;
    border-radius: 50%; border: none; cursor: pointer; color: white;
    background: var(--accent); box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    z-index: 1000; display: flex; align-items: center; justify-content: center;
    transition: all var(--smooth);
}
.floating-btn:hover { transform: scale(1.1); }
.floating-btn.playing { animation: pulse 1.5s infinite ease-out; }
@keyframes pulse { 
    0% { box-shadow: 0 0 0 0 rgba(172, 138, 76, 0.7); } 
    100% { box-shadow: 0 0 0 12px rgba(172, 138, 76, 0); } 
}

/* WIDGET */
.widget {
    position: fixed; bottom: 120px; right: 20px; /* Subi widget tamb√©m */
    width: 320px; padding: 18px; border-radius: 20px;
    z-index: 999; transition: transform var(--smooth), opacity var(--smooth);
}
.widget-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.title { font-size: 1rem; color: var(--accent-dark); font-weight: 600; }
.close-btn { font-size: 20px; background: none; border: none; cursor: pointer; color: var(--text); opacity: 0.7; transition: all var(--smooth); }
.close-btn:hover { color: var(--accent); transform: rotate(90deg); }

/* BUSCA */
#music-search { display: flex; gap: 8px; }
#music-search input { 
    flex: 1; padding: 10px 12px; border: none; border-radius: 12px; 
    background: var(--bg); box-shadow: var(--inner-shadow); font-size: 0.9rem;
}
#music-search input:focus { outline: none; box-shadow: inset 1px 1px 3px #c6c6c9, inset -1px -1px 3px #ffffff; }
#search-btn {
    position: relative; padding: 10px 14px; border-radius: 12px; 
    background: var(--accent); color: white; border: none; cursor: pointer;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.25); transition: background var(--smooth), transform var(--smooth);
}
#search-btn:hover { background: var(--accent-dark); transform: scale(1.05); }
#search-btn .loader { border: 2px solid #f3f3f3; border-top: 2px solid var(--text); width: 16px; height: 16px; position: absolute; inset: 0; margin: auto; }
#search-btn.loading .icon { opacity: 0; }
#search-btn.loading .loader { animation: spin 0.8s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* SUGEST√ïES */
.suggestions { margin: 12px 0; display: flex; flex-wrap: wrap; gap: 6px; }
.suggestion-tag {
    font-size: 12px; padding: 6px 12px; border-radius: 16px; cursor: pointer;
    color: var(--accent-dark); background: var(--card); box-shadow: 3px 3px 6px #c6c6c9, -3px -3px 6px #ffffff;
    transition: all var(--smooth);
}
.suggestion-tag:active { box-shadow: var(--inner-shadow); transform: scale(0.97); }

/* STATUS/FEEDBACK */
.status-msg { margin: 15px 0; font-size: 0.85rem; color: #777; text-align: center; }

/* PROGRESSO CIRCULAR */
.progress-container { margin: 18px 0; display: flex; flex-direction: column; align-items: center; }
.progress-circle { width: 60px; height: 60px; }
.progress-text { font-size: 14px; font-weight: 600; }
.loading-message { font-size: 12px; margin-top: 8px; color: var(--accent-dark); text-align: center; }

/* PLAYER CONTENT */
#music-content { margin-top: 15px; opacity: 1; transition: all 0.4s ease; }
.thumb-box { 
    width: 150px; height: 150px; margin: 0 auto 15px; border-radius: 16px; overflow: hidden;
    box-shadow: 0 6px 12px rgba(0,0,0,0.25); transition: transform 0.4s;
}
.thumb { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
#song-title { text-align: center; font-size: 1.15rem; margin-bottom: 10px; font-weight: 600; }

/* EQUALIZADOR ANIMADO */
.equalizer { display: flex; justify-content: space-between; height: 22px; padding: 0 20%; margin: 12px 0; }
.equalizer .bar { width: 3px; border-radius: 2px; background: var(--accent); animation: eq 0.6s infinite ease-in-out; }
.equalizer .bar:nth-child(2) { animation-delay: 0.1s; }
.equalizer .bar:nth-child(3) { animation-delay: 0.2s; }
.equalizer .bar:nth-child(4) { animation-delay: 0.3s; }
.equalizer .bar:nth-child(5) { animation-delay: 0.4s; }
@keyframes eq { 0%, 100% { height: 6px; } 50% { height: 22px; } }

/* CONTROLES */
.custom-controls { margin-top: 10px; }
.time-info { font-size: .75rem; color: #777; margin-bottom: 4px; }
.progress-bar-container { 
    height: 6px; border-radius: 3px; background: #e0e0e3; box-shadow: var(--inner-shadow);
}
#progress-bar { height: 100%; width: 0%; background: var(--accent); transition: width 0.15s linear; }

/* DOWNLOAD */
.download-btn {
    display: block; margin: 15px auto 0; padding: 10px 0; font-weight: 600; font-size: 0.95rem;
    color: white; text-align: center; text-decoration: none; border-radius: 12px;
    background: linear-gradient(145deg, var(--accent), var(--accent-dark));
    box-shadow: 3px 3px 8px rgba(0,0,0,0.25); transition: all var(--smooth);
}
.download-btn:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 6px 12px rgba(0,0,0,0.35); }

/* NOTIFICA√á√ÉO */
.notif {
    position: fixed; top: 20px; right: 20px;
    padding: 12px 16px; border-radius: 12px; font-size: 0.9rem;
    background: rgba(172, 138, 76, 0.9); backdrop-filter: blur(6px); 
    border: 1px solid rgba(255, 255, 255, 0.3); color: white;
    opacity: 0; transform: translateY(-10px); transition: all var(--smooth);
    z-index: 1001; max-width: 90vw;
}
.notif.show { opacity: 1; transform: translateY(0); }
.notif.error { background: rgba(244, 67, 54, 0.9); }

</style>

<button id="music-toggle" class="floating-btn">üéß</button>

<div id="music-widget" class="widget hidden neumorphism">
    <div class="widget-header">
        <span class="title">‚ú® Vibe Music Player</span>
        <button id="music-close" class="close-btn">‚úï</button>
    </div>

    <div id="music-search">
        <input id="query" type="text" placeholder="Buscar m√∫sica..." />
        <button id="search-btn" title="Buscar e Tocar">
            <span class="icon">üîç</span>
            <span class="loader hidden"></span>
        </button>
    </div>

    <div class="suggestions">
        <div class="suggestion-tag" onclick="setSuggestion('Doja Cat Kiss Me More')">Doja Cat</div>
        <div class="suggestion-tag" onclick="setSuggestion('Harry Styles As It Was')">Harry Styles</div>
        <div class="suggestion-tag" onclick="setSuggestion('Metallica Enter Sandman')">Rock</div>
    </div>

    <p id="status-message" class="status-msg">Digite o nome de uma m√∫sica üé∂</p>

    <div id="progress-container" class="progress-container hidden">
        <div class="progress-circle">
            <svg viewBox="0 0 36 36">
                <path class="progress-circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                <path class="progress-circle-fill" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" stroke-dasharray="0, 100" id="progress-path" />
            </svg>
            <div class="progress-text" id="progress-text">0%</div>
        </div>
        <div class="loading-message" id="loading-message">Iniciando busca...</div>
    </div>

    <div id="music-content" class="hidden">
        <div class="thumb-box">
            <img id="song-thumb" class="thumb" alt="Capa da m√∫sica" />
        </div>

        <h3 id="song-title"></h3>

        <audio id="audio" preload="metadata"></audio>

        <div id="equalizer" class="equalizer hidden">
            <div class="bar bar-1"></div>
            <div class="bar bar-2"></div>
            <div class="bar bar-3"></div>
            <div class="bar bar-4"></div>
            <div class="bar bar-5"></div>
        </div>

        <div class="custom-controls">
            <div class="time-info">
                <span id="current-time">0:00</span> / <span id="audio-duration" class="duration">0:00</span>
            </div>
            
            <div class="progress-bar-container" id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
        </div>

        <a id="btn-download" class="download-btn" download>‚¨á Baixar MP3</a>
    </div>
</div>

<div id="music-notif" class="notif hidden"></div>


<script>
const toggle = document.getElementById("music-toggle");
const closeBtn = document.getElementById("music-close");
const widget = document.getElementById("music-widget");
const audio = document.getElementById("audio");
const bar = document.getElementById("progress-bar");
const progressContainer = document.getElementById("progress-container");
const progressText = document.getElementById("progress-text");
const progressPath = document.getElementById("progress-path");
const loadingMessage = document.getElementById("loading-message");
const queryInput = document.getElementById("query");
const searchBtn = document.getElementById("search-btn");
const content = document.getElementById("music-content");
const status = document.getElementById("status-message");
const titleEl = document.getElementById("song-title");
const thumbEl = document.getElementById("song-thumb");
const durationEl = document.getElementById("audio-duration");
const currentTimeEl = document.getElementById("current-time");
const equalizer = document.getElementById("equalizer");
const progressBarContainer = document.getElementById("progress-bar-container");

const loadingMessages = [
    "üéß Sintonizando as frequ√™ncias...",
    "üé∂ Analisando a batida e o ritmo...",
    "üì° Conectando com o servidor de √°udio...",
    "‚ú® Quase l√°! Preparando a melhor qualidade...",
];

function formatTime(seconds) {
    if (!isFinite(seconds) || seconds < 0) return "0:00";
    const min = Math.floor(seconds / 60);
    const sec = Math.floor(seconds % 60);
    return min + ":" + ("0" + sec).slice(-2);
}

function showNotification(message, type = "success") {
    const notif = document.getElementById("music-notif");
    notif.textContent = message;
    notif.className = "notif"; 
    notif.classList.add("show");
    if (type) notif.classList.add(type);

    setTimeout(() => {
        notif.classList.remove("show");
        notif.classList.remove(type);
    }, 4000);
}

// WIDGET CONTROLS
// Alterna play/pause
toggle.onclick = () => {
    if (!audio.src) {
        widget.classList.toggle("hidden"); // abre/fecha widget se n√£o h√° m√∫sica
        return;
    }
    if (audio.paused) {
        audio.play();
    } else {
        audio.pause();
    }
};

// Atualiza o √≠cone de acordo com o estado do √°udio
audio.onplay = () => toggle.textContent = "‚è∏Ô∏è";
audio.onpause = () => toggle.textContent = "‚ñ∂Ô∏è";
audio.onended = () => toggle.textContent = "‚ñ∂Ô∏è";

// X fecha o widget sem pausar
closeBtn.onclick = () => {
    widget.classList.add("hidden");
};

// AUDIO EVENTS
audio.onplay = () => equalizer.classList.remove("hidden");
audio.onpause = () => equalizer.classList.add("hidden");
audio.onended = () => { bar.style.width = "0%"; currentTimeEl.textContent = "0:00"; equalizer.classList.add("hidden"); };

audio.addEventListener("loadedmetadata", () => { durationEl.textContent = formatTime(audio.duration); });
audio.addEventListener("timeupdate", () => {
    if (audio.duration) {
        const progressPercent = (audio.currentTime / audio.duration) * 100;
        bar.style.width = progressPercent + "%";
        currentTimeEl.textContent = formatTime(audio.currentTime);
    }
});

progressBarContainer.onclick = function(e) {
    if (!audio.src || !audio.duration) return;
    const rect = this.getBoundingClientRect();
    const percentage = (e.clientX - rect.left) / rect.width;
    audio.currentTime = audio.duration * percentage;
};

function setSuggestion(song) {
    queryInput.value = song;
    playMusic();
}

// PROGRESS ANIMATION
let progressAnimation;
let progressValue = 0;

function startProgressAnimation() {
    progressContainer.classList.remove("hidden");
    status.classList.add("hidden");
    progressValue = 0;
    let messageIndex = 0;
    loadingMessage.textContent = loadingMessages[0];

    progressAnimation = setInterval(() => {
        progressValue += Math.random() * 1.5 + 0.5;
        if (progressValue >= 99) progressValue = 99;
        const floorPercent = Math.floor(progressValue);
        progressText.textContent = floorPercent + "%";
        progressPath.setAttribute('stroke-dasharray', `${floorPercent}, 100`);

        if (floorPercent > 10 + messageIndex * 20 && messageIndex < loadingMessages.length - 1) {
            messageIndex++;
            loadingMessage.textContent = loadingMessages[messageIndex];
        }
    }, 100);
}

function stopProgressAnimation(success = true) {
    clearInterval(progressAnimation);
    progressValue = 100;
    progressText.textContent = "100%";
    progressPath.setAttribute('stroke-dasharray', '100, 100');
    setTimeout(() => {
        progressContainer.classList.add("hidden");
        status.classList.remove("hidden");
        progressPath.setAttribute('stroke-dasharray', '0, 100');
    }, success ? 300 : 500);
}

// MAIN FUNCTION
searchBtn.onclick = playMusic;

async function playMusic() {
    const q = queryInput.value.trim();
    if (!q) { showNotification("‚ö†Ô∏è Digite o nome da m√∫sica!", "error"); queryInput.focus(); return; }

    content.classList.add("hidden");
    audio.pause();
    searchBtn.classList.add("loading");
    searchBtn.disabled = true;

    startProgressAnimation();

    try {
        const res = await fetch("/play", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ query: q, userId: "site", User: "site" })
        });
        const data = await res.json();

        stopProgressAnimation(true);
        searchBtn.classList.remove("loading");
        searchBtn.disabled = false;

        if (!data.download) {
            status.textContent = `‚ùå "${q}" n√£o foi encontrada.`;
            showNotification("M√∫sica n√£o encontrada!", "error");
            return;
        }

        titleEl.textContent = data.title;
        thumbEl.src = data.thumb;
        audio.src = data.download;
        document.getElementById("btn-download").href = data.download;
        document.getElementById("btn-download").download = data.title + ".mp3";

        audio.onloadeddata = () => {
            content.classList.remove("hidden");
            status.textContent = "üé∂ Vibe pronta para tocar!";
            thumbEl.style.transform = "scale(1.1)";
            setTimeout(() => thumbEl.style.transform = "scale(1)", 500);
            showNotification(`‚úÖ Vibe Encontrada! ${data.title}`, "success");
            audio.play().catch(() => { status.textContent = "Clique no ‚ñ∂Ô∏è para iniciar a m√∫sica."; });
        };

    } catch (e) {
        console.error("Erro ao buscar m√∫sica:", e);
        stopProgressAnimation(false);
        searchBtn.classList.remove("loading");
        searchBtn.disabled = false;
        status.textContent = "‚ùå Erro ao buscar dados da m√∫sica.";
        showNotification("Erro de conex√£o.", "error");
    }
}
</script>

<div class="carrinho" id="carrinhoBtn" role="button" tabindex="0" aria-label="Abrir carrinho">
  <i class="fas fa-shopping-bag"></i> Carrinho 
  <span class="carrinho-count" id="carrinhoCount">0</span>
</div>


<!-- Painel do Carrinho (Side Panel Moderno) -->
<div class="finalizar" id="finalizar" aria-hidden="true">

  <!-- Cabe√ßalho do painel -->
  <div class="carrinho-header">
    <h2 class="titulo-carrinho">
      <i class="fas fa-shopping-bag"></i>
      Seu Carrinho
    </h2>

    <button class="fechar-carrinho" id="fecharCarrinho" aria-label="Fechar carrinho">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <!-- Lista dos itens -->
  <ul id="listaCarrinho" class="lista-carrinho"></ul>

  <!-- Rodap√© com total e bot√£o -->
  <div class="carrinho-footer">
    <p class="total" id="totalCarrinho">
      <span>Total:</span> <strong>R$ 0,00</strong>
    </p>

    <button id="enviarWhats" type="button" class="btn-whats" title="Finalizar pelo WhatsApp">
      <i class="fab fa-whatsapp"></i>
      Finalizar Compra
    </button>
  </div>
</div>

<div class="notificacao" id="notificacao" aria-live="polite" role="status" style="display:none;">
  <i class="fas fa-check-circle"></i>
  <span id="notificacaoTexto"></span>
</div>

<img src="https://raw.githubusercontent.com/nazuninha/uploads/main/fotos/1763313349933_rjvhcz.jpg" 
     alt="Logo GK Premium (Sutil)" 
     class="logo-flutuante">

<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
window.OneSignalDeferred = window.OneSignalDeferred || [];
OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "fb30feba-6893-44d2-a434-6248bbc492cc",
      allowLocalhostAsSecureOrigin: true
    });

    // Pega o status correto da permiss√£o na V16
    const permission = await OneSignal.Notifications.permission;

    // Se ainda n√£o aceitou ‚Üí mostra o prompt
    if (permission !== "granted") {
        OneSignal.showSlidedownPrompt();
    }
});
</script>
<script>
// ---------- ELEMENTOS ----------
const produtosContainer = document.getElementById('produtos');
const carrinhoBtn = document.getElementById('carrinhoBtn');
const fecharBtn = document.getElementById('fecharCarrinho');
const carrinhoCount = document.getElementById('carrinhoCount');

const finalizarDiv = document.getElementById('finalizar');
const listaCarrinho = document.getElementById('listaCarrinho');
const totalCarrinho = document.getElementById('totalCarrinho');
const enviarWhats = document.getElementById('enviarWhats');

const pesquisaInput = document.getElementById('pesquisa');
const notificacao = document.getElementById('notificacao');
const notificacaoTexto = document.getElementById('notificacaoTexto');
const filtroBtns = document.querySelectorAll('.filtro-btn');


// ---------- ESTADO GLOBAL ----------
window.__gk_carrinho = [];
const carrinho = window.__gk_carrinho;
const desejos = [];
let filtroAtual = "todos";


// ---------- FUN√á√ïES UTIL ----------
function safeParseFloat(v){
  return isNaN(parseFloat(String(v).replace(',', '.')))
    ? 0 
    : parseFloat(String(v).replace(',', '.'));
}

function mostrarNotificacao(texto, tipo='win'){
  notificacaoTexto.textContent = texto;
  notificacao.style.display = 'flex';

  notificacao.style.background = tipo === 'win'
    ? 'var(--cor-sucesso)'
    : 'var(--cor-erro)';

  notificacao.querySelector('i').className = tipo === 'win'
    ? 'fas fa-check-circle'
    : 'fas fa-times-circle';

  notificacao.classList.add('mostrar');

  setTimeout(() => {
    notificacao.classList.remove('mostrar');
    setTimeout(() => notificacao.style.display = 'none', 300);
  }, 2300);
}


// ---------- CONTADOR ----------
function atualizarContadorCarrinho(){
  const totalItens = carrinho.reduce((acc,p) => acc + p.qtd, 0) + desejos.length;
  carrinhoCount.textContent = totalItens;
  carrinhoBtn.setAttribute('aria-label', `Carrinho com ${totalItens} itens`);
}

// ---------- SLIDE DO CARRINHO ----------
function abrirCarrinho(){
  // Usa o atributo 'aria-hidden' para controlar o CSS (transform)
  finalizarDiv.style.display = 'block';
  setTimeout(() => finalizarDiv.setAttribute('aria-hidden','false'), 10);
}
function fecharCarrinho(){
  finalizarDiv.setAttribute('aria-hidden','true');
  setTimeout(() => finalizarDiv.style.display = 'none', 400); // Espera a transi√ß√£o
}
fecharBtn.addEventListener('click', () => fecharCarrinho());
carrinhoBtn.addEventListener('click', e => {
  e.stopPropagation();
  const isOpen = finalizarDiv.getAttribute('aria-hidden') === 'false';
  if(isOpen) fecharCarrinho(); else abrirCarrinho();
});

document.addEventListener('click', e => {
  const path = e.composedPath();
  if(path.includes(finalizarDiv) || path.includes(carrinhoBtn)) return;
  fecharCarrinho();
});


// ---------- FILTROS ----------
filtroBtns.forEach(btn => {
  btn.addEventListener('click', () => {
    filtroBtns.forEach(b => b.classList.remove('ativo'));
    btn.classList.add('ativo');
    filtroAtual = btn.dataset.filtro || 'todos';
    aplicarFiltros?.();
  });
});


// ======================================================
//  üî• CORRE√á√ÉO COMPLETA DO ADICIONAR AO CARRINHO
// ======================================================
window.adicionarCarrinho = function(id){

  const input = document.getElementById(`qtd-${id}`);
  if(!input){
    mostrarNotificacao("Erro: Quantidade n√£o encontrada", "lose");
    return;
  }

  const qtd = parseInt(input.value) || 0;
  if(qtd < 1){
    mostrarNotificacao("Quantidade m√≠nima √© 1!", "lose");
    return;
  }

  // ‚úî FLEXIBILIDADE ‚Äì aceita qualquer classe de produto
  const prodDiv = document.querySelector(`[data-id="${id}"]`);
  if(!prodDiv){
    mostrarNotificacao("Erro: Produto n√£o encontrado", "lose");
    return;
  }

  // ‚úî T√≠tulo flex√≠vel
  const titulo =
      prodDiv.querySelector("h3, .titulo, .nome-produto")?.textContent.trim()
      || "Produto";

  // ‚úî Pre√ßo flex√≠vel
  const precoEl =
      prodDiv.querySelector(".preco, .valor, .preco-produto");

  if(!precoEl){
    mostrarNotificacao("Pre√ßo n√£o encontrado", "lose");
    return;
  }

  const valor = safeParseFloat(precoEl.textContent.replace("R$", "").trim());

  // ‚úî Estoque seguro (fallback caso n√£o tenha)
  const estoque = parseInt(prodDiv.dataset.estoque || "99999");

  if(qtd > estoque){
    mostrarNotificacao(`Estoque m√°ximo: ${estoque}`, "lose");
    return;
  }

  // ‚úî Item j√° existe no carrinho
  const existente = carrinho.find(p => p.id === id);
  if(existente){
    if(existente.qtd + qtd > estoque){
      mostrarNotificacao(`S√≥ √© poss√≠vel adicionar mais ${estoque - existente.qtd}`, "lose");
      return;
    }
    existente.qtd += qtd;
  } else {
    carrinho.push({ id, descricao: titulo, valor, qtd });
  }

  atualizarCarrinho();
  mostrarNotificacao(`‚úÖ ${titulo} adicionado!`, "win");
  input.value = 1;
  abrirCarrinho();
};


// ======================================================
//  üî• LISTA DE DESEJOS
// ======================================================
window.desejoComprar = function(nome){
  if(desejos.includes(nome)){
    mostrarNotificacao(`"${nome}" j√° est√° na lista`, 'lose');
    return;
  }

  desejos.push(nome);
  atualizarCarrinho();
  mostrarNotificacao(`‚ù§Ô∏è Desejo adicionado: ${nome}`, 'win');
  abrirCarrinho();
};


// ======================================================
//  üî• ATUALIZA O CARRINHO VISUAL
// ======================================================
function atualizarCarrinho(){
  listaCarrinho.innerHTML = '';
  let total = 0;

  carrinho.forEach((p, i) => {
    const li = document.createElement('li');
    li.className = 'item-carrinho';
    const subtotal = (p.valor * p.qtd).toFixed(2);
    li.innerHTML = `
      <div class="item-info">
        <strong class="item-title">${p.descricao}</strong>
        <div class="item-meta">x${p.qtd} ‚Ä¢ R$ ${p.valor.toFixed(2)} cada</div>
        <div class="item-sub">Subtotal: R$ ${subtotal}</div>
      </div>
      <div class="item-actions">
        <button type="button" aria-label="Remover item ${p.descricao}" onclick="removerCarrinho(${i})">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    `;
    listaCarrinho.appendChild(li);
    total += (p.valor * p.qtd);
  });

  desejos.forEach((d, i) => {
    const li = document.createElement('li');
    li.className = 'item-carrinho desejo';
    li.innerHTML = `
      <div class="item-info">
        <strong class="item-title">‚≠ê Desejo futuro</strong>
        <div class="item-meta">${d}</div>
      </div>
      <div class="item-actions">
        <button type="button" aria-label="Remover desejo ${d}" onclick="removerDesejo(${i})">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    `;
    listaCarrinho.appendChild(li);
  });
  
  // Mensagem se o carrinho estiver vazio
  if(carrinho.length === 0 && desejos.length === 0){
    const li = document.createElement('li');
    li.innerHTML = 'Seu carrinho e lista de desejos est√£o vazios. Adicione algo! üíÑ';
    li.style.textAlign = 'center';
    li.style.padding = '20px 0';
    li.style.color = '#777';
    listaCarrinho.appendChild(li);
    enviarWhats.disabled = true;
  } else {
    enviarWhats.disabled = false;
  }


  totalCarrinho.textContent = `Total: R$ ${total.toFixed(2)}`;
  atualizarContadorCarrinho();
}


// ---------- REMO√á√ïES ----------
window.removerCarrinho = function(index){
  if(carrinho[index]){
    const nome = carrinho[index].descricao;
    carrinho.splice(index, 1);
    atualizarCarrinho();
    mostrarNotificacao(`‚ùå ${nome} removido`, "lose");
  }
};

window.removerDesejo = function(index){
  if(desejos[index]){
    const nome = desejos[index];
    desejos.splice(index, 1);
    atualizarCarrinho();
    mostrarNotificacao(`‚ùå Desejo removido: ${nome}`, "lose");
  }
};

// ---------- FINALIZAR (WHATSAPP) ----------
enviarWhats.addEventListener('click', (e) => {
  e.preventDefault();
  e.stopPropagation();

  // Verifica novamente se h√° itens para evitar desativa√ß√£o incorreta
  if(carrinho.length === 0 && desejos.length === 0){
    mostrarNotificacao('Seu carrinho est√° vazio!', 'lose');
    return;
  }

  // Monta a mensagem
  let msg = "*üëãüèª Ol√°, GK Premium! Gostaria de fazer um pedido:*\n\n";

  if(carrinho.length > 0){
    msg += "*üì¶ ITENS PARA COMPRA:*\n";
    carrinho.forEach(p => {
      msg += `> *${p.descricao}* x${p.qtd} (R$ ${p.valor.toFixed(2)} un.)\n`;
    });
    msg += "\n";
  }
  if(desejos.length > 0){
    msg += "*‚ù§Ô∏è DESEJOS FUTUROS (Apenas para registro):*\n";
    desejos.forEach(d => msg += `- ${d}\n`);
    msg += "\n";
  }

  const total = carrinho.reduce((acc, p) => acc + (p.valor * p.qtd), 0);
  msg += `*üí∞ TOTAL DO PEDIDO:* R$ ${total.toFixed(2)}\n\n`;
  msg += "_Aguardando a confirma√ß√£o do pedido e forma de pagamento._";
  

  const numero = "559285341621";
  const url = `https://api.whatsapp.com/send?phone=${numero}&text=${encodeURIComponent(msg)}`;

  try {
    window.open(url, '_blank', 'noopener,noreferrer');
    mostrarNotificacao('Redirecionando para o WhatsApp...', 'win');
  } catch (err) {
    window.location.href = url;
  }
});

// ---------- PESQUISA E FILTROS ----------
function aplicarFiltros(){
  const filtroTexto = (pesquisaInput.value || '').toLowerCase().trim();

  produtosContainer.querySelectorAll('.produto').forEach(prod => {
    const nome = (prod.dataset.nome || '').toLowerCase();
    const estoque = parseInt(prod.dataset.estoque) || 0;

    // regra base: pesquisa pelo texto digitado
    let mostrar = nome.includes(filtroTexto);

    // dispon√≠vel
    if(filtroAtual === 'disponivel' && estoque <= 0) mostrar = false;

    // esgotado
    if(filtroAtual === 'esgotado' && estoque > 0) mostrar = false;

    // ‚≠ê FILTRO NOVO: REL√ìGIOS
    if(filtroAtual === 'acessorio' && !nome.includes('acessorio')) {
      mostrar = false;
    }
        if(filtroAtual === 'roupas-masculinas' && !nome.includes('roupas masculina')) {
      mostrar = false;
    }
    
        if(filtroAtual === 'roupas-femininas' && !nome.includes('roupas feminina')) {
      mostrar = false;
    }
// Novos produtos ‚Üí IDs maiores
if (filtroAtual === 'novos') {
  const topN = 10;

  // pega todos os produtos (ELEMENTOS HTML), n√£o o array original
  const idsOrdenados = [...produtosContainer.querySelectorAll('.produto')]
    .map(p => parseInt(p.dataset.id) || 0)
    .sort((a, b) => b - a)
    .slice(0, topN);

  const id = parseInt(prod.dataset.id) || 0;

  if (!idsOrdenados.includes(id)) {
    mostrar = false;
  }
}


    prod.style.display = mostrar ? 'flex' : 'none';
  });
}
pesquisaInput.addEventListener('input', aplicarFiltros);

// ---------- ORGANIZAR PRODUTOS PREMIUM (TOP 3 ORDENADOS + RESTO ALEAT√ìRIO) ----------
document.addEventListener("DOMContentLoaded", () => {
  const container = document.getElementById("produtos");
  let itens = Array.from(container.children);

  // Captura a quantidade vendida de cada item
  itens.forEach(div => {
    div.__vendidos = parseInt(div.dataset.vendido || "0");
  });

  // Ordena por vendas (maior -> menor)
  const ordenados = [...itens].sort((a, b) => b.__vendidos - a.__vendidos);

  // Pega os 3 mais vendidos
  const top3 = ordenados.filter(item => item.__vendidos > 0).slice(0, 3);

  // Embaralha o resto dos produtos
  const resto = ordenados.slice(top3.length).sort(() => Math.random() - 0.5);

  // Limpa o container
  container.innerHTML = "";

  // Insere TOP 3 na ordem correta
  top3.forEach(item => container.appendChild(item));

  // Insere o resto em ordem completamente aleat√≥ria
  resto.forEach(item => container.appendChild(item));

  // Recarrega carrinho e filtros
  atualizarCarrinho();
  aplicarFiltros();
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const openBtn = document.getElementById("open-music-player");
  const closeBtn = document.getElementById("close-music-player");
  const widget = document.getElementById("music-player-widget");

  if (!openBtn || !closeBtn || !widget) {
    console.error("‚ùå Elementos do player n√£o encontrados!");
    return;
  }

  // Toggle: abre se fechado, fecha se aberto
  openBtn.onclick = () => {
    widget.classList.toggle("hidden");
  };

  // Bot√£o de fechar
  closeBtn.onclick = () => {
    widget.classList.add("hidden");
  };
});
</script>
</body>
</html>

